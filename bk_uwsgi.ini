[uwsgi]
# 使用 Unix socket
socket = /var/www/blog/boke/blog.sock
chmod-socket = 666

# 项目目录
chdir = /var/www/blog/boke

# WSGI 文件
wsgi-file = wsgi.py

# 应用程序变量名
callable = app

# 进程和线程设置
master = true
processes = 4
threads = 2
enable-threads = true

# 虚拟环境
virtualenv = /var/www/blog/venv

# 缓冲区设置
buffer-size = 65535
post-buffering = 16384

# 日志设置
daemonize = /var/www/blog/logs/uwsgi.log
log-reopen = true
log-maxsize = 50000000

# 自动重启
reload-mercy = 8
max-requests = 5000
reload-on-rss = 300
reload-on-as = 512

# 超时设置
harakiri = 30
socket-timeout = 30
http-timeout = 30

# 其他优化
vacuum = true
die-on-term = true
thunder-lock = true
lazy-apps = true
